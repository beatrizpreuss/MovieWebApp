{% extends "base.html" %}

{% block content %}

<h1>Movies</h1>
{% for movie in movies %}
    <div class="card-list">
        <img src="{{ movie.poster_url }}" alt="Poster for {{ movie.title }}" style="max-height: 300px;">
        <h2> {{ movie.title }}</h2>
        <ul>
            <li>Year: {{ movie.release_year }}</li>
            <li>Director: {{ movie.director }}</li>
        </ul>
    <form action="{{ url_for('update_movie', user_id=user.user_id, movie_id=movie.movie_id) }}" method="post">
        <input type="text" name="title" placeholder="New Title" required>
        <input type="number" name="release_year" placeholder="Year (optional)">
        <button type="submit">Update</button>
    </form>
    <form action="{{ url_for('delete_movie', user_id=user.user_id, movie_id=movie.movie_id) }}" method="post" style="margin-top: 5px;">
        <button type="submit">Delete</button>
    </form>
    </div>

{% endfor %}

    <div class="form-selection">
        <h2>Add New Movie</h2>
        <form action="{{ url_for('add_movie', user_id=user.user_id) }}" method="post">
            <label for="title">Movie title</label>
            <input type="text" id="title" name="title" required><br>
            <label for="release_year">Year (optional)</label>
            <input type="number" id="release_year" name="release_year"><br>
            <button type=submit>Add Movie</button>
        </form>
    </div>

{% endblock %}